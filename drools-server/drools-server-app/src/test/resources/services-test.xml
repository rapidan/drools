<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:camel="http://camel.apache.org/schema/spring"
    xmlns:drools-service="http://drools.org/schema/drools-service-spring"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-2.5.xsd
		http://drools.org/schema/drools-service-spring http://drools.org/schema/drools-service-spring.xsd
		http://camel.apache.org/schema/spring http://camel.apache.org/schema/spring/camel-spring.xsd"
    default-autowire="byName">
    
	<!-- Only needed to deploy on JBoss AS 5.X -->    
<!--    <bean id="jbossResolver" class="org.apache.camel.jboss.JBossPackageScanClassResolver"/>-->
    
    <!-- This camel context bean is required -->
	<camelContext id="executionContext" xmlns="http://camel.apache.org/schema/spring" />

	<drools-service:configuration id="service-conf-2" marshaller="XSTREAM" session="ksession2" />
	
	<drools-service:definition id="service" node="node1" camelContext="executionContext">
		<drools-service:configuration marshaller="JAXB" session="ksession1">
			<drools-service:class>org.drools.model.Person</drools-service:class>
			<drools-service:startup-command>
				<![CDATA[
				<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
				<batch-execution lookup="ksession1" xmlns:ns2="http://drools.org/model">
				    <insert out-identifier="santa">
				        <object xsi:type="ns2:person" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
				            <ns2:name>santa</ns2:name>
				            <ns2:age>99</ns2:age>
				        </object>
				    </insert>
				</batch-execution>
	  	   		]]>
			</drools-service:startup-command>
		</drools-service:configuration>
		<drools-service:configuration-ref id="service-conf-2" />
	</drools-service:definition>
	
</beans>